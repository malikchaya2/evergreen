#######################################
#                Tasks                #
#######################################

tasks:
  - name: private-clone-no-token
    commands:
      - command: shell.exec
        params:
          script: |
            git clone https://github.com/evergreen-ci/github-merge-queue-sandbox.git
  - name: private-clone-with-token
    commands:
      - command: github.generate_token
        params:
          expansion_name: generated_token
      - command: shell.exec
        params:
          script: |
            git clone https://x-access-token:${generated_token}@github.com/evergreen-ci/github-merge-queue-sandbox.git

#######################################
#            Buildvariants            #
#######################################
buildvariants:
  - name: DEVPROD-5742-ubuntu2204-small
    display_name: DEVPROD-5742-ubuntu2204-small
    run_on:
      - DEVPROD-5742-ubuntu2204-small
    tasks:
      - name: clone-private-https-no-token # should fail
      - name: clone-private-https-with-token # should succeed

